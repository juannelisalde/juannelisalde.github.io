const a0_0x1e3aec=a0_0x2b26;function a0_0x2b26(_0x45f8fc,_0x7be707){const _0x1c2645=a0_0x1c26();return a0_0x2b26=function(_0x2b263e,_0x2b032c){_0x2b263e=_0x2b263e-0x65;let _0x5f1134=_0x1c2645[_0x2b263e];return _0x5f1134;},a0_0x2b26(_0x45f8fc,_0x7be707);}function a0_0x1c26(){const _0x31ab66=['253170LiOClA','sort','ajax','79264EzvsCF','visibility','trim','stringify','input','preventDefault','https://citas.usiese.gov.co:6007/api/HistoriaClinica/HistoriaClinicaConsulta/ObtenerHistoricoFolios/?oidIngreso=0&directivas=true&hcUnificada=false&id=','%27','test','download','<p>No\x20encontrado</p>','getFullYear','#formDocuments','getMonth','split','replace','608734WFUkGR','<p>','211298HdqHLL','https://citas.usiese.gov.co:6007/api/Generales/ApiGeSeguridad/IniciarSesionCentroAtencion','append','length','287VZWJge','d-none','error','click','push','</b></p>','87219UpaprK','Resultados','removeClass','createElement','children','<br>','#resultContainer','join','hidden','text/csv;charset=utf-8;','783aqoirq','empty','Bearer\x20','<p><b>','application/json','POST','token','value','text','setAttribute','25430QwYFBT','No\x20se\x20encontraron\x20folios','val','No\x20se\x20encontraron\x20documentos\x20v√°lidos.','942LOBQxM','filter','map','submit','addClass','https://citas.usiese.gov.co:6007/odata/BaseConsulta/?tipo=Generales.GEENPaciente&%24select=Oid%2CDocumento%2CTipoDocumento%2CNombreCompleto%2CCarpeta1%2CCodigoCotizante%2CSexo%2CEstadoPaciente%2CRecienNacido%2CHistoriaCl%C3%ADnicaBloqueada&%24filter=Documento%20eq%20','Error\x20al\x20obtener\x20el\x20documento:','appendChild','getItem','padStart','Tipo\x20Historia:\x20','getDate','each','</p>','setItem','href',',\x20Especialidad:\x20','createObjectURL','#documents','body','#spinner','forEach','GET','3893092eAXXAL',',\x20Fecha:\x20'];a0_0x1c26=function(){return _0x31ab66;};return a0_0x1c26();}(function(_0x8cfd6,_0x33298c){const _0x3f9d35=a0_0x2b26,_0x508baa=_0x8cfd6();while(!![]){try{const _0xfb4c6c=parseInt(_0x3f9d35(0xae))/0x1+-parseInt(_0x3f9d35(0xb0))/0x2+parseInt(_0x3f9d35(0x6a))/0x3+-parseInt(_0x3f9d35(0x99))/0x4+-parseInt(_0x3f9d35(0x7e))/0x5*(parseInt(_0x3f9d35(0x82))/0x6)+parseInt(_0x3f9d35(0xb4))/0x7*(-parseInt(_0x3f9d35(0x9e))/0x8)+parseInt(_0x3f9d35(0x74))/0x9*(parseInt(_0x3f9d35(0x9b))/0xa);if(_0xfb4c6c===_0x33298c)break;else _0x508baa['push'](_0x508baa['shift']());}catch(_0x5aa3c3){_0x508baa['push'](_0x508baa['shift']());}}}(a0_0x1c26,0x87ebe));const hostLogin=a0_0x1e3aec(0xb1),dataLogin={'oidUsuario':0x59c,'oidCentroAtencion':0x1},hostDocument=a0_0x1e3aec(0x87),hostFolio=a0_0x1e3aec(0xa4),allData=[],showSpinner=()=>{const _0x453304=a0_0x1e3aec;$(_0x453304(0x96))[_0x453304(0x6c)]('d-none');},hideSpinner=()=>{const _0x429c0f=a0_0x1e3aec;$('#spinner')[_0x429c0f(0x86)](_0x429c0f(0x65));};$('#documents')['on'](a0_0x1e3aec(0xa2),function(){const _0x2d5d89=a0_0x1e3aec,_0x29ebda=/^[0-9,\s]*$/,_0x10601a=$(this)[_0x2d5d89(0x80)]();!_0x29ebda[_0x2d5d89(0xa6)](_0x10601a)&&$(this)[_0x2d5d89(0x80)](_0x10601a[_0x2d5d89(0xad)](/[^0-9,\s]/g,''));}),$(a0_0x1e3aec(0xaa))['on'](a0_0x1e3aec(0x85),function(_0x102e33){const _0x22a37b=a0_0x1e3aec;_0x102e33[_0x22a37b(0xa3)](),$(_0x22a37b(0x70))[_0x22a37b(0x75)](),allData['length']=0x0;let _0x502c62=$(_0x22a37b(0x94))[_0x22a37b(0x80)]()[_0x22a37b(0xac)](',');_0x502c62=_0x502c62[_0x22a37b(0x84)](_0x3a4fbb=>_0x3a4fbb[_0x22a37b(0xa0)]()),_0x502c62[_0x22a37b(0x9c)]((_0x1ee521,_0x37d9cf)=>_0x1ee521-_0x37d9cf),_0x502c62=[...new Set(_0x502c62)],_0x502c62=_0x502c62[_0x22a37b(0x83)](_0x63874=>_0x63874!==''&&_0x63874['length']>0x0);if(_0x502c62[_0x22a37b(0xb3)]===0x0){alert(_0x22a37b(0x81));return;}let _0x443a34=0x0;const _0x58e1cc=_0x502c62[_0x22a37b(0xb3)];showSpinner(),$[_0x22a37b(0x8e)](_0x502c62,function(_0x334e6,_0x1b1e1e){getDocument(_0x1b1e1e)['then'](()=>{const _0x145a70=a0_0x2b26;_0x443a34++,_0x443a34===_0x58e1cc&&(hideSpinner(),exportResultContainerToCSV(_0x145a70(0x6b)));});});});const getToken=()=>{const _0x43b8ca=a0_0x1e3aec;if(localStorage[_0x43b8ca(0x8a)](_0x43b8ca(0x7a)))return localStorage['getItem']('token');$['ajax']({'url':hostLogin,'type':_0x43b8ca(0x79),'contentType':_0x43b8ca(0x78),'data':JSON[_0x43b8ca(0xa1)](dataLogin),'success':function(_0x3094e1){const _0x364982=_0x43b8ca,_0x53fcd0=_0x3094e1['token'];return localStorage[_0x364982(0x90)](_0x364982(0x7a),_0x53fcd0),_0x53fcd0;},'error':function(_0x3a366e){const _0x16b518=_0x43b8ca;return console[_0x16b518(0x66)]('Error\x20al\x20obtener\x20el\x20token:',_0x3a366e),null;}});},getFolio=_0x84778b=>{return new Promise((_0x2b3ede,_0x174e5d)=>{const _0x214f4c=a0_0x2b26;$[_0x214f4c(0x9d)]({'url':''+hostFolio+_0x84778b,'type':_0x214f4c(0x98),'headers':{'Authorization':_0x214f4c(0x76)+getToken()},'success':function(_0x1ac3d0){const _0x420523=_0x214f4c;if(_0x1ac3d0[_0x420523(0xb3)]>0x0){const _0x59a2ba=_0x1ac3d0['map'](_0x4631f2=>{const _0x35f210=_0x420523,{TipoHistoria:_0x4e0d3c,Especialidad:_0x5f5a42,Fecha:_0x2fcb71}=_0x4631f2;return _0x35f210(0x8c)+_0x4e0d3c+_0x35f210(0x92)+_0x5f5a42+_0x35f210(0x9a)+formatDate(_0x2fcb71);});_0x2b3ede(_0x59a2ba);}else _0x2b3ede(_0x420523(0x7f));},'error':function(_0x7cf619){const _0x1a8105=_0x214f4c;console[_0x1a8105(0x66)]('Error\x20al\x20obtener\x20el\x20folio:',_0x7cf619),_0x174e5d(_0x7cf619);}});});},getDocument=_0x46eb7a=>{return new Promise(_0xf509dd=>{const _0x3832d2=a0_0x2b26;$[_0x3832d2(0x9d)]({'url':hostDocument+'%27'+_0x46eb7a+_0x3832d2(0xa5),'type':_0x3832d2(0x98),'headers':{'Authorization':'Bearer\x20'+getToken()},'success':function(_0x16d52e){const _0x59f4b5=_0x3832d2;if(_0x16d52e[_0x59f4b5(0x7b)]['length']>0x0){const _0x517430=_0x16d52e[_0x59f4b5(0x7b)][0x0],{NombreCompleto:_0x241af6,Oid:_0x153ab6,Documento:_0x1edb29}=_0x517430;getFolio(_0x153ab6)['then'](_0x185f30=>{const _0x5068f4=_0x59f4b5,_0xe83aa9=Array['isArray'](_0x185f30)?_0x185f30:[_0x185f30];$(_0x5068f4(0x70))['append'](_0x5068f4(0x77)+_0x1edb29+',\x20Nombre:\x20'+_0x241af6+_0x5068f4(0x69)),_0xe83aa9[_0x5068f4(0x97)](_0x546f92=>{const _0x4af315=_0x5068f4;$('#resultContainer')[_0x4af315(0xb2)](_0x4af315(0xaf)+_0x46eb7a+','+_0x546f92+_0x4af315(0x8f));}),$(_0x5068f4(0x70))['append'](_0x5068f4(0x6f)),_0xf509dd();});}else $(_0x59f4b5(0x70))[_0x59f4b5(0xb2)](_0x59f4b5(0x77)+_0x46eb7a+',\x20No\x20encontrado</b></p>'),$(_0x59f4b5(0x70))[_0x59f4b5(0xb2)](_0x59f4b5(0xa8)),$('#resultContainer')[_0x59f4b5(0xb2)](_0x59f4b5(0x6f)),_0xf509dd();},'error':function(_0x2bd868){const _0x1fcb49=_0x3832d2;console[_0x1fcb49(0x66)](_0x1fcb49(0x88),_0x2bd868),_0xf509dd();}});});},exportResultContainerToCSV=_0x418597=>{const _0x37f4c2=a0_0x1e3aec,_0x539831=[];_0x539831[_0x37f4c2(0x68)]('Documento,Nombre,Fecha'),$(_0x37f4c2(0x70))[_0x37f4c2(0x6e)]()['each'](function(){const _0x2cb3c9=_0x37f4c2,_0x504eac=$(this)[_0x2cb3c9(0x7c)]()[_0x2cb3c9(0xa0)]();_0x504eac&&_0x539831[_0x2cb3c9(0x68)](_0x504eac);});const _0xcb39c8=_0x539831[_0x37f4c2(0x71)]('\x0a'),_0xded96=new Blob([_0xcb39c8],{'type':_0x37f4c2(0x73)}),_0x280c47=document[_0x37f4c2(0x6d)]('a'),_0x299f8c=URL[_0x37f4c2(0x93)](_0xded96);_0x280c47['setAttribute'](_0x37f4c2(0x91),_0x299f8c),_0x280c47[_0x37f4c2(0x7d)](_0x37f4c2(0xa7),_0x418597+'.csv'),_0x280c47['style'][_0x37f4c2(0x9f)]=_0x37f4c2(0x72),document[_0x37f4c2(0x95)][_0x37f4c2(0x89)](_0x280c47),_0x280c47[_0x37f4c2(0x67)](),document[_0x37f4c2(0x95)]['removeChild'](_0x280c47);},formatDate=_0x377010=>{const _0x51dcd3=a0_0x1e3aec,_0x474dcd=new Date(_0x377010),_0x2dd4e6=String(_0x474dcd[_0x51dcd3(0x8d)]())[_0x51dcd3(0x8b)](0x2,'0'),_0x37b4af=String(_0x474dcd[_0x51dcd3(0xab)]()+0x1)[_0x51dcd3(0x8b)](0x2,'0'),_0x2845d0=_0x474dcd[_0x51dcd3(0xa9)]();return _0x2dd4e6+'/'+_0x37b4af+'/'+_0x2845d0;};