const a0_0x86eb9f=a0_0x40cf;(function(_0x3f5ad9,_0x533b4c){const _0x2d41ab=a0_0x40cf,_0x12d094=_0x3f5ad9();while(!![]){try{const _0x48ecac=-parseInt(_0x2d41ab(0x134))/0x1*(-parseInt(_0x2d41ab(0x128))/0x2)+-parseInt(_0x2d41ab(0x13d))/0x3*(-parseInt(_0x2d41ab(0x146))/0x4)+parseInt(_0x2d41ab(0x142))/0x5*(-parseInt(_0x2d41ab(0x122))/0x6)+parseInt(_0x2d41ab(0x111))/0x7*(parseInt(_0x2d41ab(0x127))/0x8)+parseInt(_0x2d41ab(0x104))/0x9*(-parseInt(_0x2d41ab(0x119))/0xa)+parseInt(_0x2d41ab(0x137))/0xb+parseInt(_0x2d41ab(0x110))/0xc*(parseInt(_0x2d41ab(0x116))/0xd);if(_0x48ecac===_0x533b4c)break;else _0x12d094['push'](_0x12d094['shift']());}catch(_0x2ba090){_0x12d094['push'](_0x12d094['shift']());}}}(a0_0x1bc8,0xd62da));function a0_0x40cf(_0x3cf9fd,_0x406a7b){const _0x1bc8e7=a0_0x1bc8();return a0_0x40cf=function(_0x40cf04,_0x27065c){_0x40cf04=_0x40cf04-0xf9;let _0x6df489=_0x1bc8e7[_0x40cf04];return _0x6df489;},a0_0x40cf(_0x3cf9fd,_0x406a7b);}const hostLogin='https://citas.usiese.gov.co:6007/api/Generales/ApiGeSeguridad/IniciarSesionCentroAtencion',dataLogin={'oidUsuario':0x1,'oidCentroAtencion':0x1},hostDocument='https://citas.usiese.gov.co:6007/odata/BaseConsulta/?tipo=Generales.GEENPaciente&%24select=Oid%2CDocumento%2CTipoDocumento%2CNombreCompleto%2CCarpeta1%2CCodigoCotizante%2CSexo%2CEstadoPaciente%2CRecienNacido%2CHistoriaCl%C3%ADnicaBloqueada&%24filter=Documento%20eq%20',hostFolio=a0_0x86eb9f(0x143),allData=[],showSpinner=()=>{const _0x4bbc1c=a0_0x86eb9f;$(_0x4bbc1c(0x10d))[_0x4bbc1c(0x12b)](_0x4bbc1c(0x11c));},hideSpinner=()=>{const _0xa33c5d=a0_0x86eb9f;$(_0xa33c5d(0x10d))[_0xa33c5d(0x131)](_0xa33c5d(0x11c));};$('#documents')['on'](a0_0x86eb9f(0x11a),function(){const _0x433381=a0_0x86eb9f,_0x5a3335=/^[0-9,\s]*$/,_0x456182=$(this)['val']();!_0x5a3335['test'](_0x456182)&&$(this)[_0x433381(0x12c)](_0x456182[_0x433381(0x145)](/[^0-9,\s]/g,''));}),$('#formDocuments')['on'](a0_0x86eb9f(0x105),function(_0x3824c2){const _0x342238=a0_0x86eb9f;_0x3824c2[_0x342238(0x13c)](),$(_0x342238(0x12f))['empty'](),allData[_0x342238(0x10b)]=0x0;let _0x52676d=$(_0x342238(0x109))['val']()[_0x342238(0x125)](',');_0x52676d=_0x52676d['map'](_0x35ccac=>_0x35ccac[_0x342238(0xfe)]()),_0x52676d[_0x342238(0x114)]((_0x4f4f00,_0x29dbcd)=>_0x4f4f00-_0x29dbcd),_0x52676d=[...new Set(_0x52676d)],_0x52676d=_0x52676d['filter'](_0x4043f9=>_0x4043f9!==''&&_0x4043f9[_0x342238(0x10b)]>0x0);if(_0x52676d[_0x342238(0x10b)]===0x0){alert(_0x342238(0x11b));return;}let _0x468281=0x0;const _0xb05268=_0x52676d[_0x342238(0x10b)];showSpinner(),$[_0x342238(0xff)](_0x52676d,function(_0x2b91e1,_0x46ce5c){getDocument(_0x46ce5c)['then'](()=>{const _0x5072f6=a0_0x40cf;_0x468281++,_0x468281===_0xb05268&&(hideSpinner(),exportResultContainerToCSV(_0x5072f6(0x10c)));});});});const getToken=()=>{const _0x55bf0d=a0_0x86eb9f;if(localStorage[_0x55bf0d(0x12a)](_0x55bf0d(0x117)))return localStorage[_0x55bf0d(0x12a)](_0x55bf0d(0x117));$[_0x55bf0d(0x124)]({'url':hostLogin,'type':'POST','contentType':_0x55bf0d(0x100),'data':JSON[_0x55bf0d(0x108)](dataLogin),'success':function(_0x3be3fe){const _0x8a9e73=_0x3be3fe['token'];return localStorage['setItem']('token',_0x8a9e73),_0x8a9e73;},'error':function(_0x43aa05){const _0x2edf97=_0x55bf0d;return console[_0x2edf97(0xfd)](_0x2edf97(0xfc),_0x43aa05),null;}});},getFolio=_0x35cc4f=>{return new Promise((_0x44093f,_0x5475fa)=>{const _0x1bb6ef=a0_0x40cf;$['ajax']({'url':''+hostFolio+_0x35cc4f,'type':'GET','headers':{'Authorization':_0x1bb6ef(0x132)+getToken()},'success':function(_0x4b3da5){const _0x57a9fd=_0x1bb6ef;if(_0x4b3da5[_0x57a9fd(0x10b)]>0x0){const _0x6b60ef=_0x4b3da5['map'](_0x14d3be=>{const _0x56345c=_0x57a9fd,{TipoHistoria:_0x141036,Especialidad:_0xf965a5,Fecha:_0x4c946c}=_0x14d3be;return _0x56345c(0x106)+_0x141036+_0x56345c(0x13a)+_0xf965a5+_0x56345c(0xfa)+formatDate(_0x4c946c);});_0x44093f(_0x6b60ef);}else _0x44093f('No\x20se\x20encontraron\x20folios');},'error':function(_0xfe5cd0){const _0x47de4e=_0x1bb6ef;console[_0x47de4e(0xfd)]('Error\x20al\x20obtener\x20el\x20folio:',_0xfe5cd0),_0x5475fa(_0xfe5cd0);}});});},getDocument=_0x3909e9=>{return new Promise(_0x3122b7=>{const _0x528ee4=a0_0x40cf;$[_0x528ee4(0x124)]({'url':hostDocument+_0x528ee4(0x11e)+_0x3909e9+_0x528ee4(0x11e),'type':'GET','headers':{'Authorization':_0x528ee4(0x132)+getToken()},'success':function(_0x548f73){const _0x4e6064=_0x528ee4;if(_0x548f73[_0x4e6064(0x13f)][_0x4e6064(0x10b)]>0x0){const _0x4e7921=_0x548f73[_0x4e6064(0x13f)][0x0],{NombreCompleto:_0x4fb9c6,Oid:_0x5e9de4,Documento:_0x5865e2}=_0x4e7921;getFolio(_0x5e9de4)[_0x4e6064(0x113)](_0x553325=>{const _0x502b08=_0x4e6064,_0x554b99=Array[_0x502b08(0x112)](_0x553325)?_0x553325:[_0x553325];$(_0x502b08(0x12f))[_0x502b08(0x136)]('<p><b>'+_0x5865e2+_0x502b08(0xfb)+_0x4fb9c6+_0x502b08(0x144)),_0x554b99[_0x502b08(0x102)](_0x4b65c6=>{const _0x1f49fa=_0x502b08;$(_0x1f49fa(0x12f))['append'](_0x1f49fa(0x10a)+_0x3909e9+','+_0x4b65c6+_0x1f49fa(0x123));}),$(_0x502b08(0x12f))[_0x502b08(0x136)](_0x502b08(0x138)),_0x3122b7();});}else $(_0x4e6064(0x12f))[_0x4e6064(0x136)]('<p><b>'+_0x3909e9+_0x4e6064(0x103)),$(_0x4e6064(0x12f))['append']('<p>No\x20encontrado</p>'),$(_0x4e6064(0x12f))[_0x4e6064(0x136)](_0x4e6064(0x138)),_0x3122b7();},'error':function(_0x16d8e2){const _0x570cad=_0x528ee4;console[_0x570cad(0xfd)](_0x570cad(0x126),_0x16d8e2),_0x3122b7();}});});},exportResultContainerToCSV=_0x4bc58b=>{const _0x317904=a0_0x86eb9f,_0x54c62e=[];_0x54c62e[_0x317904(0x130)](_0x317904(0x121)),$('#resultContainer')[_0x317904(0x135)]()['each'](function(){const _0x1d1362=_0x317904,_0x19ad2c=$(this)[_0x1d1362(0x12e)]()[_0x1d1362(0xfe)]();_0x19ad2c&&_0x54c62e['push'](_0x19ad2c);});const _0x595a4b=_0x54c62e[_0x317904(0x101)]('\x0a'),_0x42a903=new Blob([_0x595a4b],{'type':_0x317904(0x133)}),_0x41afc9=document[_0x317904(0xf9)]('a'),_0x956490=URL[_0x317904(0x141)](_0x42a903);_0x41afc9[_0x317904(0x13e)](_0x317904(0x12d),_0x956490),_0x41afc9['setAttribute'](_0x317904(0x10f),_0x4bc58b+_0x317904(0x139)),_0x41afc9[_0x317904(0x118)][_0x317904(0x129)]='hidden',document['body'][_0x317904(0x140)](_0x41afc9),_0x41afc9[_0x317904(0x11d)](),document[_0x317904(0x120)][_0x317904(0x107)](_0x41afc9);},formatDate=_0x232e09=>{const _0x29352e=a0_0x86eb9f,_0x21fe67=new Date(_0x232e09),_0x12a39c=String(_0x21fe67[_0x29352e(0x13b)]())[_0x29352e(0x10e)](0x2,'0'),_0x1c2417=String(_0x21fe67[_0x29352e(0x11f)]()+0x1)[_0x29352e(0x10e)](0x2,'0'),_0x41c6a9=_0x21fe67[_0x29352e(0x115)]();return _0x12a39c+'/'+_0x1c2417+'/'+_0x41c6a9;};function a0_0x1bc8(){const _0x2a529e=[',\x20Especialidad:\x20','getDate','preventDefault','42099gyLwVw','setAttribute','value','appendChild','createObjectURL','2805lkqhmf','https://citas.usiese.gov.co:6007/api/HistoriaClinica/HistoriaClinicaConsulta/ObtenerHistoricoFolios/?oidIngreso=0&directivas=true&hcUnificada=false&id=','</b></p>','replace','476vGDvBF','createElement',',\x20Fecha:\x20',',\x20Nombre:\x20','Error\x20al\x20obtener\x20el\x20token:','error','trim','each','application/json','join','forEach',',\x20No\x20encontrado</b></p>','14976WvwUlu','submit','Tipo\x20Historia:\x20','removeChild','stringify','#documents','<p>','length','Resultados','#spinner','padStart','download','18684eeWLWU','378uZwzye','isArray','then','sort','getFullYear','6383wgHABQ','token','style','10190CAAJRl','input','No\x20se\x20encontraron\x20documentos\x20v√°lidos.','d-none','click','%27','getMonth','body','Documento,Nombre,Fecha','8718GAWCcd','</p>','ajax','split','Error\x20al\x20obtener\x20el\x20documento:','13952KlZeGD','2hnFZOH','visibility','getItem','removeClass','val','href','text','#resultContainer','push','addClass','Bearer\x20','text/csv;charset=utf-8;','26869FntjMz','children','append','9158204xdjRrJ','<br>','.csv'];a0_0x1bc8=function(){return _0x2a529e;};return a0_0x1bc8();}