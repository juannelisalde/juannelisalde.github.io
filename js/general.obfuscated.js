const a0_0x25d728=a0_0x27f3;(function(_0x554412,_0x3e6a17){const _0xbda436=a0_0x27f3,_0x3ec647=_0x554412();while(!![]){try{const _0x22240f=parseInt(_0xbda436(0x1c8))/0x1+-parseInt(_0xbda436(0x1a2))/0x2+parseInt(_0xbda436(0x1a3))/0x3+-parseInt(_0xbda436(0x1a7))/0x4+parseInt(_0xbda436(0x187))/0x5*(-parseInt(_0xbda436(0x1b6))/0x6)+parseInt(_0xbda436(0x1c5))/0x7*(-parseInt(_0xbda436(0x1b8))/0x8)+-parseInt(_0xbda436(0x191))/0x9;if(_0x22240f===_0x3e6a17)break;else _0x3ec647['push'](_0x3ec647['shift']());}catch(_0x2e713e){_0x3ec647['push'](_0x3ec647['shift']());}}}(a0_0x29f2,0x3690e));const hostLogin=a0_0x25d728(0x1bc),dataLogin={'oidUsuario':0x1,'oidCentroAtencion':0x1},hostDocument=a0_0x25d728(0x186),hostFolio=a0_0x25d728(0x199),allData=[],noPrintEspecialidad=['ODONTOLOGIA\x20GENERAL'],noPrintDiagnostico=[a0_0x25d728(0x196)],showSpinner=()=>{const _0x4c4be1=a0_0x25d728;$(_0x4c4be1(0x18d))[_0x4c4be1(0x1b2)]('d-none');},hideSpinner=()=>{const _0x2bd953=a0_0x25d728;$(_0x2bd953(0x18d))[_0x2bd953(0x1c2)](_0x2bd953(0x1c0));};$('#documents')['on'](a0_0x25d728(0x1c3),function(){const _0x31f91d=a0_0x25d728,_0x6d741d=/^[0-9,\s]*$/;let _0x25c2bd=$(this)[_0x31f91d(0x192)]();_0x25c2bd=_0x25c2bd[_0x31f91d(0x19a)](/[\n\r]+/g,','),!_0x6d741d['test'](_0x25c2bd)&&(_0x25c2bd=_0x25c2bd[_0x31f91d(0x19a)](/[^0-9,\s]/g,'')),_0x25c2bd=_0x25c2bd[_0x31f91d(0x19a)](/^,|,$/g,''),$(this)['val'](_0x25c2bd);}),$(a0_0x25d728(0x184))['on']('submit',function(_0x22f888){const _0x333dc3=a0_0x25d728;_0x22f888[_0x333dc3(0x19d)](),$(_0x333dc3(0x19f))[_0x333dc3(0x197)](),allData[_0x333dc3(0x198)]=0x0;let _0x34b1d5=$(_0x333dc3(0x1b9))[_0x333dc3(0x192)]()[_0x333dc3(0x1bd)](',');_0x34b1d5=_0x34b1d5[_0x333dc3(0x19b)](_0x598b5e=>_0x598b5e[_0x333dc3(0x1ba)]()),_0x34b1d5[_0x333dc3(0x18b)]((_0x4545c4,_0x186ada)=>_0x4545c4-_0x186ada),_0x34b1d5=[...new Set(_0x34b1d5)],_0x34b1d5=_0x34b1d5[_0x333dc3(0x1ca)](_0x4a4ca5=>_0x4a4ca5!==''&&_0x4a4ca5[_0x333dc3(0x198)]>0x0);if(_0x34b1d5[_0x333dc3(0x198)]===0x0){alert(_0x333dc3(0x1cc));return;}let _0x503fab=0x0;const _0x596a8b=_0x34b1d5[_0x333dc3(0x198)];showSpinner(),$[_0x333dc3(0x1d0)](_0x34b1d5,function(_0x500373,_0x244e61){const _0x542e04=_0x333dc3;getDocument(_0x244e61)[_0x542e04(0x18c)](()=>{_0x503fab++,_0x503fab===_0x596a8b&&(hideSpinner(),exportResultContainerToCSV('Resultados'));});});});function a0_0x27f3(_0x24852e,_0x597686){const _0x29f216=a0_0x29f2();return a0_0x27f3=function(_0x27f382,_0x64b277){_0x27f382=_0x27f382-0x184;let _0x5d4181=_0x29f216[_0x27f382];return _0x5d4181;},a0_0x27f3(_0x24852e,_0x597686);}function a0_0x29f2(){const _0x5892e7=['Error\x20al\x20obtener\x20el\x20token:','getMonth','d-none','createElement','addClass','input','token','81102DOGRuQ','removeChild','ajax','375791jcJemn','Error\x20al\x20obtener\x20el\x20folio:','filter','%27','No\x20se\x20encontraron\x20documentos\x20v√°lidos.','forEach','error','No\x20se\x20encontraron\x20folios','each','getFullYear','#formDocuments','Bearer\x20','https://citas.usiese.gov.co:6007/odata/BaseConsulta/?tipo=Generales.GEENPaciente&%24select=Oid%2CDocumento%2CTipoDocumento%2CNombreCompleto%2CCarpeta1%2CCodigoCotizante%2CSexo%2CEstadoPaciente%2CRecienNacido%2CHistoriaCl%C3%ADnicaBloqueada&%24filter=Documento%20eq%20','885jFreen','</b></p>','text','includes','sort','then','#spinner','href','createObjectURL','value','1825065zZQnyt','val',',\x20No\x20encontrado</b></p>','hidden','Documento,Nombre,Fecha','CARIES\x20DE\x20LA\x20DENTINA','empty','length','https://citas.usiese.gov.co:6007/api/HistoriaClinica/HistoriaClinicaConsulta/ObtenerHistoricoFolios/?oidIngreso=0&directivas=true&hcUnificada=false&id=','replace','map','push','preventDefault','<p>','#resultContainer','setAttribute','isArray','94900KRPAaW','1053561KJXIAi',',\x20Nombre:\x20','appendChild',',\x20Fecha:\x20','99056Hpqexc','click','padStart','<p><b>','body','append','GET','<p>No\x20encontrado</p>','getItem','Tipo\x20Historia:\x20','getDate','removeClass','text/csv;charset=utf-8;','.csv','<br>','6174ZWhoaE','Error\x20al\x20obtener\x20el\x20documento:','32ozVnsM','#documents','trim','download','https://citas.usiese.gov.co:6007/api/Generales/ApiGeSeguridad/IniciarSesionCentroAtencion','split'];a0_0x29f2=function(){return _0x5892e7;};return a0_0x29f2();}const getToken=()=>{const _0x231ba7=a0_0x25d728;if(localStorage[_0x231ba7(0x1af)](_0x231ba7(0x1c4)))return localStorage[_0x231ba7(0x1af)](_0x231ba7(0x1c4));$[_0x231ba7(0x1c7)]({'url':hostLogin,'type':'POST','contentType':'application/json','data':JSON['stringify'](dataLogin),'success':function(_0x19b6ab){const _0x32ca56=_0x19b6ab['token'];return localStorage['setItem']('token',_0x32ca56),_0x32ca56;},'error':function(_0x5c3cf9){const _0x4e6cb5=_0x231ba7;return console[_0x4e6cb5(0x1ce)](_0x4e6cb5(0x1be),_0x5c3cf9),null;}});},getFolio=_0x2242b6=>{return new Promise((_0x23421f,_0x1b15dc)=>{$['ajax']({'url':''+hostFolio+_0x2242b6,'type':'GET','headers':{'Authorization':'Bearer\x20'+getToken()},'success':function(_0x4aa898){const _0x76e756=a0_0x27f3;if(_0x4aa898[_0x76e756(0x198)]>0x0){const _0x4deada=_0x4aa898[_0x76e756(0x19b)](_0x284a4a=>{const _0x88c782=_0x76e756,{TipoHistoria:_0x11d541,Especialidad:_0x4e43c1,Fecha:_0x468e7c,Diagnostico:_0x3d7258}=_0x284a4a;if(!noPrintEspecialidad[_0x88c782(0x18a)](_0x4e43c1)&&!noPrintDiagnostico['includes'](_0x3d7258))return _0x88c782(0x1b0)+_0x11d541+',\x20Especialidad:\x20'+_0x4e43c1+_0x88c782(0x1a6)+formatDate(_0x468e7c);})[_0x76e756(0x1ca)](_0x2e0349=>_0x2e0349!==undefined);_0x4deada[_0x76e756(0x198)]==0x0&&_0x23421f(_0x76e756(0x1cf)),_0x23421f(_0x4deada);}else _0x23421f(_0x76e756(0x1cf));},'error':function(_0x100bcf){const _0xeb2af2=a0_0x27f3;console['error'](_0xeb2af2(0x1c9),_0x100bcf),_0x1b15dc(_0x100bcf);}});});},getDocument=_0x55547b=>{return new Promise(_0x46ed6c=>{const _0x3650e2=a0_0x27f3;$[_0x3650e2(0x1c7)]({'url':hostDocument+'%27'+_0x55547b+_0x3650e2(0x1cb),'type':_0x3650e2(0x1ad),'headers':{'Authorization':_0x3650e2(0x185)+getToken()},'success':function(_0x388d38){const _0x36a16a=_0x3650e2;if(_0x388d38[_0x36a16a(0x190)]['length']>0x0){const _0x571d5a=_0x388d38[_0x36a16a(0x190)][0x0],{NombreCompleto:_0x527b92,Oid:_0x4c3efe,Documento:_0x5b6f9e}=_0x571d5a;getFolio(_0x4c3efe)[_0x36a16a(0x18c)](_0x4e9cec=>{const _0x5b70f1=_0x36a16a,_0x7fd27=Array[_0x5b70f1(0x1a1)](_0x4e9cec)?_0x4e9cec:[_0x4e9cec];$(_0x5b70f1(0x19f))[_0x5b70f1(0x1ac)](_0x5b70f1(0x1aa)+_0x5b6f9e+_0x5b70f1(0x1a4)+_0x527b92+_0x5b70f1(0x188)),_0x7fd27[_0x5b70f1(0x1cd)](_0x38c882=>{const _0x1a93cb=_0x5b70f1;$('#resultContainer')[_0x1a93cb(0x1ac)](_0x1a93cb(0x19e)+_0x55547b+','+_0x38c882+'</p>');}),$(_0x5b70f1(0x19f))[_0x5b70f1(0x1ac)](_0x5b70f1(0x1b5)),_0x46ed6c();});}else $(_0x36a16a(0x19f))['append']('<p><b>'+_0x55547b+_0x36a16a(0x193)),$(_0x36a16a(0x19f))[_0x36a16a(0x1ac)](_0x36a16a(0x1ae)),$(_0x36a16a(0x19f))[_0x36a16a(0x1ac)](_0x36a16a(0x1b5)),_0x46ed6c();},'error':function(_0x1b6229){const _0x4e0a8a=_0x3650e2;console['error'](_0x4e0a8a(0x1b7),_0x1b6229),_0x46ed6c();}});});},exportResultContainerToCSV=_0x441076=>{const _0x261b8e=a0_0x25d728,_0x17d330=[];_0x17d330[_0x261b8e(0x19c)](_0x261b8e(0x195)),$('#resultContainer')['children']()[_0x261b8e(0x1d0)](function(){const _0x3d9e96=_0x261b8e,_0x12a96c=$(this)[_0x3d9e96(0x189)]()[_0x3d9e96(0x1ba)]();_0x12a96c&&_0x17d330[_0x3d9e96(0x19c)](_0x12a96c);});const _0x104f25=_0x17d330['join']('\x0a'),_0x16db4c=new Blob([_0x104f25],{'type':_0x261b8e(0x1b3)}),_0x168087=document[_0x261b8e(0x1c1)]('a'),_0x2f1b2d=URL[_0x261b8e(0x18f)](_0x16db4c);_0x168087[_0x261b8e(0x1a0)](_0x261b8e(0x18e),_0x2f1b2d),_0x168087[_0x261b8e(0x1a0)](_0x261b8e(0x1bb),_0x441076+_0x261b8e(0x1b4)),_0x168087['style']['visibility']=_0x261b8e(0x194),document[_0x261b8e(0x1ab)][_0x261b8e(0x1a5)](_0x168087),_0x168087[_0x261b8e(0x1a8)](),document[_0x261b8e(0x1ab)][_0x261b8e(0x1c6)](_0x168087);},formatDate=_0x1bfab4=>{const _0x1bf2e0=a0_0x25d728,_0x524901=new Date(_0x1bfab4),_0x140fb1=String(_0x524901[_0x1bf2e0(0x1b1)]())[_0x1bf2e0(0x1a9)](0x2,'0'),_0x3ee824=String(_0x524901[_0x1bf2e0(0x1bf)]()+0x1)[_0x1bf2e0(0x1a9)](0x2,'0'),_0x2a6ab4=_0x524901[_0x1bf2e0(0x1d1)]();return _0x140fb1+'/'+_0x3ee824+'/'+_0x2a6ab4;};